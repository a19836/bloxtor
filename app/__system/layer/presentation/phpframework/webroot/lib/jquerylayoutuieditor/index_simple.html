<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	
	<!-- (Optional) Color -->
	<script language="javascript" type="text/javascript" src="../../../../common/js/color.js"></script>
	
	<!-- JQuery -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jquery/js/jquery-1.8.1.min.js"></script>
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jqueryui/js/jquery-ui-1.11.4.min.js"></script>
	<link rel="stylesheet" href="../../../../common/vendor/jqueryui/css/jquery-ui-1.11.4.css">
	
	<!-- To work on mobile devices with touch -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jqueryuitouchpunch/jquery.ui.touch-punch.min.js"></script>
	
	<!-- Jquery Tap-Hold Event JS file -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jquerytaphold/taphold.js"></script>

	<!-- Material-design-iconic-font -->
	<link rel="stylesheet" href="lib/materialdesigniconicfont/css/material-design-iconic-font.min.css">
	
	<!-- Parse_Str -->
	<script type="text/javascript" src="../../../../common/vendor/phpjs/functions/strings/parse_str.js"></script>
	
	<!-- MD5 -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jquery/js/jquery.md5.js"></script>
	
	<!-- JQuery Nestable2 -->
	<link rel="stylesheet" href="lib/nestable2/jquery.nestable.min.css" type="text/css" charset="utf-8" />
	<script language="javascript" type="text/javascript" src="lib/nestable2/jquery.nestable.min.js"></script>
	
	<!-- Add Code Editor JS files -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/acecodeeditor/src-min-noconflict/ace.js"></script>
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/acecodeeditor/src-min-noconflict/ext-language_tools.js"></script>
	
	<!-- Add Code Beautifier -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/mycodebeautifier/js/MyCodeBeautifier.js"></script>

	<!-- Add Html/CSS/JS Beautify code -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jsbeautify/js/lib/beautify.js"></script>
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jsbeautify/js/lib/beautify-css.js"></script>
	<script language="javascript" type="text/javascript" src="../myhtmlbeautify/MyHtmlBeautify.js"></script>
	
	<!-- Add Auto complete -->
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/myautocomplete/js/MyAutoComplete.js"></script>
	<link rel="stylesheet" href="../../../../common/vendor/myautocomplete/css/style.css">
	
	<!-- CONTEXT MENU -->
	<link rel="stylesheet" href="../../../../common/vendor/jquerymycontextmenu/css/style.css" type="text/css" charset="utf-8" />
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jquerymycontextmenu/js/jquery.mycontextmenu.js"></script>
   
	<!-- Layout UI Editor -->
		<!-- Layout UI Editor - HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			 <script src="lib/jqueryuidroppableiframe/js/html5_ie8/html5shiv.min.js"></script>
			 <script src="lib/jqueryuidroppableiframe/js/html5_ie8/respond.min.js"></script>
		<![endif]-->
		
		<!-- Layout UI Editor - Add Iframe droppable fix -->
    	<script type="text/javascript" src="lib/jqueryuidroppableiframe/js/jquery-ui-droppable-iframe-fix.js"></script>    
    
    	<!-- Layout UI Editor - Add Iframe droppable fix - IE10 viewport hack for Surface/desktop Windows 8 bug -->
    	<script src="lib/jqueryuidroppableiframe/js/ie10-viewport-bug-workaround.js"></script>
	    	
		<!-- Layout UI Editor - Add Editor -->
		<link rel="stylesheet" href="css/some_bootstrap_style.css" type="text/css" charset="utf-8" />
		<link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />
		<link rel="stylesheet" href="css/widget_resource.css" type="text/css" charset="utf-8" />
		
		<script language="javascript" type="text/javascript" src="js/TextSelection.js"></script>
		<script language="javascript" type="text/javascript" src="js/LayoutUIEditor.js"></script>
		<script language="javascript" type="text/javascript" src="js/CreateWidgetContainerClassObj.js"></script>
		
		<!-- (Optional) Layout UI Editor - LayoutUIEditorFormField.js is optional, bc it depends of FormFieldsUtilObj.js -->
		<script language="javascript" type="text/javascript" src="http://jplpinto.localhost/__system/phpframework/__system/cache/workflow/tasks/default/programming/common/js/global.js"></script>
		<script language="javascript" type="text/javascript" src="http://jplpinto.localhost/__system/phpframework/__system/cache/workflow/tasks/default/programming/common/js/FormFieldsUtilObj.js"></script>
		<script language="javascript" type="text/javascript" src="js/LayoutUIEditorFormField.js"></script>
		
		<!-- (Optional) Layout UI Editor - Add Widget Resources -->
		<script language="javascript" type="text/javascript" src="js/LayoutUIEditorWidgetResource.js"></script>
	
	<!-- (Optional) Add Fontawsome Icons CSS -->
	<link rel="stylesheet" href="../../../../common/vendor/fontawesome/css/all.min.css">

	<!-- (Optional) Add Fancy LighBox lib -->
	<link rel="stylesheet" href="../../../../common/vendor/jquerymyfancylightbox/css/style.css" type="text/css" charset="utf-8" media="screen, projection" />
	<script language="javascript" type="text/javascript" src="../../../../common/vendor/jquerymyfancylightbox/js/jquery.myfancybox.js"></script>

	<!-- (Optional) Others -->
	<link rel="stylesheet" href="examples/css/beauty.css" type="text/css" charset="utf-8" />
	<script language="javascript" type="text/javascript" src="js/script.js"></script>
	
	<script>
	var MyLayoutUIEditor = new LayoutUIEditor();
	
	$(function() {
		MyLayoutUIEditor.options.ui_selector = ".layout-ui-editor";
		MyLayoutUIEditor.options.on_ready_func = function() {
			//show view layout panel instead of code
			var luie = MyLayoutUIEditor.getUI();
			var view_layout = luie.find(" > .tabs > .view-layout");
			view_layout.addClass("do-not-confirm");
			view_layout.trigger("click");
			view_layout.removeClass("do-not-confirm");
		};
		MyLayoutUIEditor.init("MyLayoutUIEditor");
	});
	</script>
</head>
<body>
	<div class="layout-ui-editor reverse fixed-side-properties layout-ui-editor-beauty">
		<!-- MENU WIDGETS -->
		<ul class="menu-widgets hidden">
			
			<!-- WIDGETS GROUP -->
			<li class="group group-generic group-open">
				<div class="group-title"><i class="zmdi zmdi-caret-down toggle"></i>Generic</div>
				<ul>
					
					<!-- WIDGET LINK NODE -->
					<li class="draggable menu-widget menu-widget-href " data-tag="href" title="Link" data-create-widget-class="HrefWidget" data-resizable="1" data-absolute-position="1">
						<!-- MENU WIDGET -->
						<span>Link</span>
						
						<!-- WIDGET TO BE CREATED IN THE TEMPLATE/CANVAS -->
						<a class="template-widget template-widget-href droppable"></a>
						
						<!-- WIDGET PROPERTIES -->
						<div class="properties">
							<div class="form-group row settings-property href">
								<label class="col-md-4 col-sm-5 col-form-label">Url: </label>
								<input class="col-md-8 col-sm-7 form-control" name="href" />
							</div>
						</div>
						
						<!-- WIDGET STYLING -->
						<style>
							.layout-ui-editor > .menu-widgets .menu-widget.menu-widget-href:before,
							  body > .menu-widget.menu-widget-href.ui-draggable-dragging:before {
								background-image:url('widget/generic/href/logo.svg');
							}
							.layout-ui-editor > .template-widgets .widget-header.widget-header-href {
								border-radius:0 5px 5px 0;
							}
							.layout-ui-editor > .template-widgets .widget-header.widget-header-href .options .option.toggle {
								display:none;
							}
						</style>
						
						<!-- WIDGET CLASS AND HANDLERS -->
						<script>
						function HrefWidget(ui_creator, menu_widget) {
							var me = this;
							
							me.init = function() {
								menu_widget.attr({
									"data-on-parse-template-widget-html-func": ui_creator.obj_var_name + ".menu_widgets_objs.href.parseHtml",
									"data-on-create-template-widget-func": ui_creator.obj_var_name + ".menu_widgets_objs.href.onCreateTemplateWidget",
								});
								
								menu_widget.children(".properties").attr({
									"data-on-after-save-settings-field-func": ui_creator.obj_var_name + ".menu_widgets_objs.href.saveSettingsField",
									"data-on-before-parse-widget-settings-func": ui_creator.obj_var_name + ".menu_widgets_objs.href.parseSettings",
								});
							};
							
							me.parseHtml = function(html_element) {
								if (html_element && html_element.nodeName.toLowerCase() == "a")
									return {
										droppable: $(html_element),
									};
							};
							
							me.parseSettings = function(widget, widget_settings) {
								widget_settings["href"] = widget.attr("href");
							};
							
							me.onCreateTemplateWidget = function(widget, html_element) {
								if (!html_element) {
									//check if exists first bc when we change the node names of the widgets.
									
									if (!widget[0].hasAttribute("href"))
										widget.attr("href", "#");
									
									if (widget.contents().length == 0) //very important, otherwise everytime we change a div to a link, it will add this text.
										widget.append("link text");
								}
							};
							
							me.saveSettingsField = function(field, widget, status) {
								if (status) {
									field = $(field);
									var field_value = field.val();
									var sprop = field.parent();
									
									if (sprop.hasClass("href")) {
										if (field_value != "")
											widget.attr("href", field_value);
										else 
											widget.removeAttr("href");
									}
								}
								
								return status;
							};
						}
						</script>
					</li>
					
					<!-- WIDGET IMAGE NODE -->
					<li class="draggable menu-widget menu-widget-image " data-tag="image" title="Image" data-create-widget-class="ImageWidget" data-resizable="1" data-absolute-position="1">
						<!-- MENU WIDGET -->
						<span>Image</span>
						
						<!-- WIDGET TO BE CREATED IN THE TEMPLATE/CANVAS -->
						<img class="template-widget template-widget-image "></img>
						
						<!-- WIDGET PROPERTIES -->
						<div class="properties">
							<div class="form-group row settings-property src">
								<label class="col-md-4 col-sm-5 col-form-label">Source: </label>
								<input class="col-md-8 col-sm-7 form-control" name="src" />
							</div>
						</div>
						
						<!-- WIDGET STYLING -->
						<style>
							.layout-ui-editor > .menu-widgets .menu-widget.menu-widget-image:before,
							  body > .menu-widget.menu-widget-image.ui-draggable-dragging:before {
								background-image:url('widget/generic/image/logo.svg');
							}
							.layout-ui-editor > .template-widgets .widget-header.widget-header-image {
								border-radius:0 5px 5px 0;
							}
							.layout-ui-editor > .template-widgets .widget-header.widget-header-image .options .option.toggle {
								display:none;
							}
						</style>
						
						<!-- WIDGET CLASS AND HANDLERS -->
						<script>
						function ImageWidget(ui_creator, menu_widget) {
							var me = this;
							var default_src = ui_creator.getLayoutUIEditorFolderPath() + "widget/generic/image/default_image.gif";
							
							me.init = function() {
								menu_widget.attr({
									"data-on-parse-template-widget-html-func": ui_creator.obj_var_name + ".menu_widgets_objs.image.parseHtml",
									"data-on-create-template-widget-func": ui_creator.obj_var_name + ".menu_widgets_objs.image.onCreateTemplateWidget"
								});
								
								menu_widget.children(".properties").attr({
									"data-on-before-parse-widget-settings-func": ui_creator.obj_var_name + ".menu_widgets_objs.image.parseSettings",
									"data-on-after-save-settings-field-func": ui_creator.obj_var_name + ".menu_widgets_objs.image.saveSettingsField"
								});
							};
							
							me.parseHtml = function(html_element) {
								return html_element && html_element.nodeName.toLowerCase() == "img";
							};
							
							me.onCreateTemplateWidget = function(widget, html_element) {
								if (!html_element) 
									widget.attr("src", default_src);
							};
							
							me.parseSettings = function(widget, widget_settings) {
								widget_settings["src"] = widget.attr("src");
							};
							
							me.saveSettingsField = function(field, widget, status) {
								if (status) {
									field = $(field);
									var field_value = field.val();
									var sprop = field.parent();
									
									if (sprop.hasClass("src")) {
										field_value = field_value.replace(/^\s+/g, "").replace(/\s+$/g, "");//trim url
										
										if (field_value != "")
											widget.attr("src", field_value);
										else {
											ui_creator.showError("Image src cannot be empty!");
											field.val( widget.attr("src") );
										}
									}
								}
								
								return status;
							};
						}
						</script>
					</li>
				</ul>
			</li>
		</ul>
	</div>
</body>
</html>
